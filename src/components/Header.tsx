"use client";

import { useState } from "react";
import { usePathname, useRouter } from "next/navigation";
import { Menu } from "lucide-react"; // Import the Menu icon from lucide-react

export default function Header() {
  const [showMenu, setShowMenu] = useState(false);
  const pathname = usePathname();
  const router = useRouter();

  const menuItems = [
    {
      label: "Chat",
      link: "/chat",
      svg: <>
        <svg aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 452 452" className="svg-inline--fa fa-circle-notch w-4 h-4">
          <path fill="currentColor" d="M449.94,193.74c-0.55,25.11-0.29,50.31-1.81,75.4c-3.18,52.44-48.01,99.5-100.22,104.77
        c-21.32,2.15-42.93,1.88-64.41,1.95c-21.22,0.07-40.25,5.9-57.38,18.43c-16.8,12.29-33.89,24.2-50.76,36.41
        c-6.93,5.02-14.73,8.64-23.01,8.67c-10.32,0.04-19.89-3.95-27.42-11.45c-11.13-11.09-14.62-24.26-9.94-39.38
        c2.8-9.05,0.33-12.83-9.05-12.49c-21.85,0.79-42.55-2.99-60.85-15.51c-26.62-18.21-41.77-43.45-42.15-75.9
        c-0.56-48.16-0.15-96.33,0.35-144.49c0.12-11.77,1.42-23.66,3.58-35.24c8.9-47.88,49.57-85.29,98.33-89.95
        c20.7-1.97,41.58-2.54,62.39-2.77c39-0.42,78.02-0.46,117.02,0c24.46,0.29,49.02-0.33,73.25,4.35
        c44.75,8.63,82.06,47.75,88.36,92.81c0.69,4.95,1.62,9.9,1.79,14.87C448.77,147.37,449.31,170.52,449.94,193.74z M226.22,43.85
        c0-0.1,0-0.21,0-0.31c-19.67,0-39.35-0.3-59.01,0.08c-19.65,0.38-39.34,0.71-58.9,2.37c-33.89,2.86-63.58,29.45-70.37,62.77
        c-2.28,11.19-3.42,22.79-3.54,34.21c-0.48,47-0.91,94.01-0.25,141c0.37,26.46,14.42,45,38.39,55.96
        c11.41,5.22,23.61,5.19,35.81,4.91c7.18-0.17,13.89,1.48,20.04,5.14c16.06,9.55,22.86,27.94,17.14,45.78
        c-0.68,2.11-1.27,4.67-0.71,6.69c1.5,5.4,7.13,6.5,12.52,2.67c17.93-12.73,35.78-25.58,53.74-38.26
        c20.76-14.66,43.88-21.92,69.32-22.04c18.66-0.09,37.33-0.39,55.99-0.87c19.04-0.49,35.66-7.59,50.12-19.73
        c21.84-18.35,31.65-42.13,31.55-70.41c-0.11-33.33,0.27-66.67-0.14-100c-0.17-13.79-1.08-27.66-2.96-41.32
        c-4.19-30.38-30.46-58.6-60.55-64.53c-13.31-2.62-27.09-3.66-40.68-3.93C284.57,43.45,255.39,43.85,226.22,43.85z"/>
        </svg>
      </>
    },
    {
      label: "Tools",
      link: "/tools",
      svg: <>
        <svg aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 452 452" className="svg-inline--fa fa-circle-notch w-4 h-4">
          <path fill="currentColor" d="M105.5,209.95c-18,0-36,0.05-53.99-0.01c-28.72-0.09-49.46-20.75-49.52-49.42c-0.07-36.32-0.06-72.64,0-108.96
        C2.03,22.57,22.72,1.96,51.79,1.92c36.16-0.05,72.32-0.05,108.49,0c29.07,0.04,49.72,20.63,49.77,49.66
        c0.06,36.32,0.08,72.64,0,108.96c-0.06,28.69-20.8,49.31-49.54,49.39C142.16,210,123.83,209.95,105.5,209.95z M33.99,105.71
        c0,18.34-0.03,36.67,0.01,55.01c0.03,10.52,6.66,17.2,17.16,17.21c36.51,0.04,73.02,0.04,109.54,0
        c10.8-0.01,17.33-6.62,17.34-17.53c0.03-36.34,0.03-72.68,0-109.01c-0.01-10.84-6.6-17.45-17.41-17.46
        c-36.35-0.03-72.69-0.03-109.04,0c-11.07,0.01-17.58,6.6-17.59,17.78C33.97,69.71,33.99,87.71,33.99,105.71z"/>
          <path fill="currentColor" d="M346.18,1.91c18.16,0,36.33-0.05,54.49,0.01c28.73,0.09,49.4,20.72,49.46,49.47c0.08,36.32,0.07,72.64,0,108.96
        c-0.05,28.96-20.77,49.55-49.85,49.59c-36.16,0.05-72.32,0.05-108.49,0c-29.02-0.04-49.67-20.7-49.72-49.73
        c-0.05-36.15-0.05-72.31,0-108.46c0.04-29.3,20.67-49.78,50.11-49.83C310.19,1.89,328.18,1.91,346.18,1.91z M345.87,177.94
        c18.34,0,36.68,0.04,55.02-0.01c10.55-0.03,17.23-6.63,17.24-17.12c0.04-36.5,0.04-73.01,0-109.51
        c-0.01-10.79-6.65-17.36-17.5-17.36c-36.35-0.03-72.69-0.03-109.04,0c-10.83,0.01-17.48,6.6-17.49,17.38
        c-0.03,36.34-0.03,72.68,0,109.01c0.01,11.1,6.58,17.6,17.76,17.62C309.85,177.97,327.86,177.94,345.87,177.94z"/>
          <path fill="currentColor" d="M106.17,241.96c18,0,36-0.03,53.99,0.01c29.33,0.06,49.84,20.63,49.88,50.06c0.04,35.99,0.04,71.98,0,107.96
        c-0.04,29.38-20.6,49.97-49.94,50c-36.16,0.04-72.32,0.05-108.49,0c-28.97-0.05-49.59-20.75-49.63-49.81
        c-0.05-36.15-0.05-72.31,0-108.46c0.04-29.05,20.67-49.67,49.69-49.74C69.84,241.92,88.01,241.96,106.17,241.96z M178.04,346.23
        c0-18.34,0.04-36.67-0.01-55.01c-0.03-10.51-6.68-17.23-17.12-17.24c-36.51-0.04-73.02-0.03-109.54,0
        C40.6,273.98,34,280.63,34,291.47c-0.03,36.34-0.03,72.68,0,109.01c0.01,10.85,6.59,17.49,17.37,17.5
        c36.35,0.03,72.69,0.03,109.04,0c11.16-0.01,17.61-6.52,17.63-17.75C178.07,382.23,178.04,364.23,178.04,346.23z"/>
          <path fill="currentColor" d="M346.1,241.96c18.16,0,36.33-0.04,54.49,0.01c28.76,0.09,49.48,20.68,49.54,49.38c0.08,36.49,0.09,72.98,0,109.46
        c-0.07,28.37-20.85,49.1-49.26,49.16c-36.5,0.08-72.99,0.08-109.49,0c-28.42-0.06-49.22-20.79-49.29-49.13
        c-0.09-36.49-0.07-72.98,0-109.46c0.06-28.68,20.79-49.33,49.52-49.41C309.77,241.91,327.93,241.96,346.1,241.96z M418.14,346.22
        c0-18.34,0.04-36.67-0.01-55.01c-0.03-10.51-6.68-17.23-17.12-17.24c-36.51-0.04-73.02-0.03-109.54,0
        c-10.77,0.01-17.36,6.65-17.37,17.5c-0.03,36.34-0.03,72.68,0,109.01c0.01,10.84,6.59,17.48,17.38,17.49
        c36.35,0.03,72.69,0.03,109.04,0c11.16-0.01,17.6-6.52,17.62-17.75C418.16,382.23,418.14,364.23,418.14,346.22z"/>
        </svg>

      </>
    },
    {
      label: "History",
      link: "/history",
      svg: <>
        <svg aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 452 452" className="svg-inline--fa fa-custom-icon w-4 h-4">
          <path fill="currentColor" d="M107.84,214.39c0-2.06,0-3.85,0-5.64c0-54.84-0.01-109.68,0-164.52c0-26.05,16.36-42.35,42.49-42.35
        c64.83-0.01,129.66,0.05,194.48-0.09c6.28-0.01,11.09,1.85,15.53,6.33c27.34,27.58,54.83,55.01,82.35,82.41
        c4.93,4.91,7.41,10.24,7.39,17.53c-0.2,99.68-0.07,199.36-0.18,299.04c-0.03,26.61-19.8,43.18-42.97,43.08
        c-94.66-0.42-189.32-0.15-283.98-0.18c-60.1-0.02-108.29-40.42-118.65-99.45c-1-5.7-2.34-11.49-2.21-17.21
        c1.44-60.19,42.38-109.31,101.96-118.42C105.17,214.74,106.3,214.6,107.84,214.39z M134.02,214.38
        c21.66,2.64,40.7,10.33,57.84,22.9c2.07,1.52,5.05,2.54,7.62,2.55c45.67,0.15,91.33,0.11,137,0.11c12.5,0,25,0,37.5,0
        c5.68,0,10.01,2.38,12.53,7.51c4.44,9.06-2.13,18.64-12.84,18.64c-49.5,0.04-99,0.02-148.5,0.02c-1.73,0-3.47,0-6.09,0
        c10.88,16.6,17.03,33.96,19.35,52.69c18.06,0,35.55,0,53.04,0c27.67,0,55.33-0.04,83,0.03c7.4,0.02,12.89,5.17,13.41,12.16
        c0.47,6.37-4.19,12.44-10.72,13.72c-1.77,0.35-3.65,0.25-5.48,0.25c-42.67,0.01-85.33,0.01-128,0.01c-1.77,0-3.54,0-5.29,0
        c-4.11,31.93-18.46,57.72-43.19,78.87c2.09,0,2.88,0,3.67,0c69.33,0,138.67,0,208-0.01c11.09,0,16.04-5.02,16.04-16.24
        c0-95.52,0-191.04,0-286.56c0-1.62,0-3.25,0-5.32c-2.04,0-3.66,0-5.29,0c-22.17,0-44.33,0.01-66.5,0
        c-10.78-0.01-15.84-5.11-15.85-15.96c-0.02-22,0-44.01,0-66.01c0-1.79,0-3.57,0-5.73c-1.93,0-3.39,0-4.85,0c-60,0-120,0-180,0
        c-11.52,0-16.39,4.87-16.39,16.38c0,54.85,0,109.69,0,164.54C134.02,210.59,134.02,212.24,134.02,214.38z M121.14,239.95
        C70.5,239.86,29.1,281.06,29,331.64c-0.09,50.57,41.19,92.08,91.71,92.21c50.48,0.14,92.05-41.27,92.14-91.79
        C212.95,281.44,171.73,240.04,121.14,239.95z M361.94,89.06c13.88,0,27.51,0,40.6,0c-13.47-13.55-27.04-27.2-40.6-40.85
        C361.94,61.66,361.94,75.34,361.94,89.06z"/>
          <path fill="currentColor" d="M278.21,187.45c-31.5,0-63.01,0.05-94.51-0.03c-11.34-0.03-18.01-9.96-13.04-19.22
        c2.82-5.26,7.49-7.18,13.28-7.17c23,0.05,46.01,0.02,69.01,0.02c40.01,0,80.01-0.02,120.02,0.01c11.35,0.01,18.2,9.78,13.43,19.06
        c-2.85,5.55-7.69,7.36-13.67,7.35C341.22,187.42,309.72,187.45,278.21,187.45z"/>
          <path fill="currentColor" d="M134.02,318.81c7.53,0,14.34-0.05,21.14,0.01c8.21,0.07,13.93,5.55,13.86,13.16
        c-0.08,7.36-5.75,12.9-13.61,12.97c-11.32,0.11-22.64,0.11-33.95,0c-8.24-0.08-13.57-5.59-13.59-13.97
        c-0.06-16.98-0.06-33.96,0-50.94c0.03-7.96,5.91-14.04,13.23-13.92c7.22,0.12,12.84,5.99,12.9,13.75
        C134.08,292.67,134.02,305.46,134.02,318.81z"/>
        </svg>
      </>
    },
    {
      label: "Account",
      link: "/account",
      svg: <>
        <svg aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 452 452" className="svg-inline--fa fa-circle-notch w-4 h-4">
          <path fill="currentColor" d="M450.14,225.92c0.02,123.84-100.32,224.12-224.17,224.05C102.06,449.89,1.82,349.52,1.99,225.72
    C2.16,102,102.18,2.05,225.91,1.93C349.76,1.81,450.11,102.06,450.14,225.92z M172.64,247.94
    c-56.02-40.34-47.38-110.85-14.12-144.23c34.67-34.79,92.32-37.8,128.86-5.55c18.81,16.6,30.27,37.25,32.4,62.23
    c3.1,36.38-11.23,65.31-40.36,87.3c48.26,18.21,83.92,59.51,96.13,106.84c60.95-67.02,71.61-188.12-11.04-269.57
    C282.36,4,150.83,9.79,75.27,98.35C2.2,184.01,23.03,297.21,76.68,354.39C91.21,303.29,123.3,267.92,172.64,247.94z M227.74,423.74
    c4.89-0.26,11.41-0.32,17.86-1c33.75-3.58,65.1-14.37,92.59-34.27c18.36-13.29,15.97-5.55,11.25-28.35
    c-0.27-1.3-0.58-2.6-0.97-3.87c-18.55-60.68-75.83-97.88-138.86-90.22c-56.15,6.83-102.51,52.75-109.81,108.93
    c-0.18,1.39,0.71,3.5,1.82,4.39C137.96,408.58,179.57,423.17,227.74,423.74z M226,101.77c-37.5,0.03-68.02,30.57-67.98,68.01
    c0.04,37.39,30.77,68.06,68.12,67.98c37.43-0.08,68.05-30.76,67.98-68.12C294.04,132.16,263.52,101.74,226,101.77z"/>
        </svg>
      </>
    },
  ];

  const handleNavigation = (link: string) => {
    setShowMenu(false);
    router.push(link);
  };

  const menuDisplay = menuItems.map((item, index) => (
    <div
      key={index}
      onClick={() => handleNavigation(item.link)}
      className={`cursor-pointer px-3 py-2 navbar-link font-semibold flex items-center gap-2 text-base ${pathname === item.link ? "active" : "text-white"
        }`}
    >
      {/* {
        item.icon &&
        <i className={item.icon}></i>
      } */}
      {
        item.svg && item.svg
      }
      {item.label}
    </div>
  ));

  const sideBar = (
    <div className="fixed top-0 left-0 z-40 w-full h-screen max-w-[250px] bg-[#0A0F20] shadow-inner transition ease-in-out">
      {/* Logo */}
      <div

        className="flex items-center justify-between p-4"
      >
        <span onClick={() => handleNavigation("/")} className="px-3 py-2 text-white bg-orange-500 rounded-md cursor-pointer text-lg font-bold">
          XREF.AI
        </span>
        <span><i className="fa-solid fa-xmark text-white cursor-pointer"></i></span>
      </div>
      {menuItems.map((item, index) => (
        <div
          key={index}
          onClick={() => handleNavigation(item.link)}
          className={`whitespace-nowrap flex h-14 gap-2 w-full items-center justify-start p-4 navbar-link cursor-pointer md:py-2 ${pathname === item.link
            ? "bg-orange-500 text-white"
            : "text-white "
            }`}
        >
          {/* {
            item.icon &&
            <i className={item.icon} style={{ marginRight: "0.5rem" }}></i>
          } */}
          {
            item.svg && item.svg
          }
          {item.label}
        </div>
      ))}
    </div>
  );

  return (
    <div className="container mx-auto bg-[#0A0F20] sticky top-0 z-30 text-gray-700 shadow-lg px-4 py-4">
      <div className="flex items-center justify-between text-sm">
        {/* Logo */}
        <div
          onClick={() => handleNavigation("/")}
          className="flex items-center justify-center"
        >
          <span className="px-3 py-2 text-white bg-orange-500 rounded-md cursor-pointer text-lg font-bold">
            XREF.AI
          </span>
        </div>

        {/* Menu icon for small screens */}
        <div
          className="ml-auto flex items-center justify-center h-full sm:hidden transition ease-in-out"
          onClick={() => setShowMenu(!showMenu)}
        >
          <Menu className="w-6 h-6 cursor-pointer text-white rounded-full" />
        </div>

        {/* Desktop Menu */}
        <div className="hidden sm:flex space-x-4">{menuDisplay}</div>
      </div>

      {/* Mobile Menu */}
      {showMenu && (
        <div className="relative flex w-full h-full sm:hidden">
          <div className="fixed top-0 right-0 z-40 w-full h-screen bg-black bg-opacity-50" />
          {sideBar}
        </div>
      )}
    </div>
  );
}
